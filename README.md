# 句子级别评估系统 v2

基于 `interface_sorting.py` 的新版本句子级别评估网站，用于评估生成答案与原始答案的对比。

## 功能特点

- 📊 读取 Excel 文件（`merged_benchmark_result（正式版）.xlsx`）
- 🔍 显示原始答案和生成答案的对比
- 📝 4类错误统计：预测错误、缺失预测、位置描述错误、严重程度错误
- 📦 批次处理：每批次5个句子
- 💾 结果导出：支持下载 JSON 格式的评估结果

## 安装

```bash
pip install -r requirements.txt
```

## 使用方法

1. 启动应用：
```bash
streamlit run interface_evaluation.py
```

2. 在侧边栏输入用户名

3. 点击"加载文件"按钮加载 Excel 文件

4. 选择批次进行评估

5. 为每个句子统计4类错误的数量

6. 完成评估后点击"下载批次"保存结果

## 数据格式

Excel 文件应包含以下列：
- `原始答案`：原始答案（中文）
- `生成答案`：生成答案（中文或英文）
- `生成答案(中文)`：生成答案的中文版本（如果存在）
- `大类`、`小类`、`属性`、`问题`、`模型来源`：元数据信息

## 错误类型说明

1. **预测错误**：原报告没有，预测有（如原报告没有肺部阴影，预测有阴影）
2. **缺失预测**：原报告有，预测没有（如原报告有肺部结节，预测没有结节）
3. **位置描述错误**：不正确的位置描述（如原报告有左下肺阴影，预测右肺阴影）
4. **严重程度错误**：不正确的严重程度（如原报告严重胸膜粘连，预测轻度粘连）

## 输出格式

评估结果以 JSON 格式保存，包含：
- 用户名和时间戳
- 批次信息
- 每个句子的原始答案、生成答案和错误统计

